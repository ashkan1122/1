(function(){function c(f){return f.replace(/[A-Z]/g,function(f){return"-"+f.toLowerCase()})}function e(f){if(typeof f==k){var b=g.createElement("div");b.innerHTML=f;return b}b=g.createElement("div");b.appendChild(f);return b}function d(f){return f._xuiEventID?f._xuiEventID:f._xuiEventID=++d.id}function h(f,b){var a=q[f]=q[f]||{};return a[b]=a[b]||[]}function j(f,b,a){var c=d(f),b=h(c,b),c=function(b){!1===a.call(f,b)&&(b.preventDefault(),b.stopPropagation())};c.guid=a.guid=a.guid||++d.id;c.handler=
a;b.push(c);return c}function l(f){return(f||"").replace(I,"")}var b,a=this,k=new String("string"),g=a.document,t=/^#?([\w-]+)$/,r=/^#/,m=/<([\w:]+)/,p=function(f){return[].slice.call(f,0)};try{p(g.documentElement.childNodes)}catch(v){p=function(f){for(var b=[],a=0;f[a];a++)b.push(f[a]);return b}}a.x$=a.xui=b=function(f,a){return new b.fn.find(f,a)};[].forEach||(Array.prototype.forEach=function(f,b){var a=this.length||0,c=0;if("function"==typeof f)for(;c<a;c++)f.call(b,this[c],c,this)});b.fn=b.prototype=
{extend:function(f){for(var a in f)b.fn[a]=f[a]},find:function(f,c){var n=[],d;if(f)if(void 0==c&&this.length)n=this.each(function(a){n=n.concat(p(b(f,a)))}).reduce(n);else if(c=c||g,typeof f==k)t.test(f)&&c.getElementById&&c.getElementsByTagName?(n=r.test(f)?[c.getElementById(f.substr(1))]:c.getElementsByTagName(f),null==n[0]&&(n=[])):m.test(f)?(d=g.createElement("i"),d.innerHTML=f,p(d.childNodes).forEach(function(f){n.push(f)})):n=void 0!==a.Sizzle?Sizzle(f,c):c.querySelectorAll(f),n=p(n);else if(f instanceof
Array)n=f;else if(f.nodeName||f===a)n=[f];else{if("[object NodeList]"==f.toString()||"[object HTMLCollection]"==f.toString()||"number"==typeof f.length)n=p(f)}else return this;return this.set(n)},set:function(f){var a=b();a.cache=p(this.length?this:[]);a.length=0;[].push.apply(a,f);return a},reduce:function(f,b){var a=[],f=f||p(this);f.forEach(function(f){0>a.indexOf(f,0,b)&&a.push(f)});return a},has:function(f){var a=b(f);return this.filter(function(){var f=this,b=null;a.each(function(a){b=b||a==
f});return b})},filter:function(f){var b=[];return this.each(function(a,c){f.call(a,c)&&b.push(a)}).set(b)},not:function(f){var a=p(this),c=b(f);return!c.length?this:this.filter(function(f){var b;c.each(function(c){return b=a[f]!=c});return b})},each:function(f){for(var b=0,a=this.length;b<a&&!1!==f.call(this[b],this[b],b,this);++b);return this}};b.fn.find.prototype=b.fn;b.extend=b.fn.extend;b.extend({html:function(f,b){if(0==arguments.length){var a=[];this.each(function(f){a.push(f.innerHTML)});
return a}1==arguments.length&&"remove"!=arguments[0]&&(b=f,f="inner");if("remove"!=f&&b&&void 0!==b.each){if("inner"==f){var c=g.createElement("p");b.each(function(f){c.appendChild(f)});this.each(function(f){f.innerHTML=c.innerHTML})}else{var d=this;b.each(function(b){d.html(f,b)})}return this}return this.each(function(a){var c,d=0;if("inner"==f)if(typeof b==k||"number"==typeof b){a.innerHTML=b;a=a.getElementsByTagName("SCRIPT");for(c=a.length;d<c;d++)eval(a[d].text)}else a.innerHTML="",a.appendChild(b);
else if("remove"==f)a.parentNode.removeChild(a);else{d=e(b,-1<["outer","top","bottom"].indexOf(f)?a:a.parentNode);c=d.childNodes;"outer"==f?a.parentNode.replaceChild(d,a):"top"==f?a.insertBefore(d,a.firstChild):"bottom"==f?a.insertBefore(d,null):"before"==f?a.parentNode.insertBefore(d,a):"after"==f&&a.parentNode.insertBefore(d,a.nextSibling);for(a=d.parentNode;c.length;)a.insertBefore(c[0],d);a.removeChild(d)}})},attr:function(f,a){if(2==arguments.length)return this.each(function(b){b.tagName&&"input"==
b.tagName.toLowerCase()&&"value"==f?b.value=a:b.setAttribute&&("checked"==f&&(""==a||!1==a||"undefined"==typeof a)?b.removeAttribute(f):b.setAttribute(f,a))});var b=[];this.each(function(a){a.tagName&&"input"==a.tagName.toLowerCase()&&"value"==f?b.push(a.value):a.getAttribute&&a.getAttribute(f)&&b.push(a.getAttribute(f))});return b}});"inner outer top bottom remove before after".split(" ").forEach(function(a){b.fn[a]=function(b){return this.html(a,b)}});b.events={};var q={};b.extend({on:function(a,
c,n){return this.each(function(g){if(b.events[a]){var k=d(g),k=h(k,a);n=n||{};n.handler=function(c,d){b.fn.fire.call(b(this),a,d)};k.length||b.events[a].call(g,n)}g.addEventListener(a,j(g,a,c),!1)})},un:function(a,b){return this.each(function(c){for(var g=d(c),k=h(g,a),e=k.length;e--;)if(void 0===b||b.guid===k[e].guid){c.removeEventListener(a,k[e],!1);var o=q[g][a],j=e,t=o.slice(2);o.length=0>j?o.length+j:j;o.push.apply(o,t)}"undefined"!=typeof q[g][a]&&0===q[g][a].length&&delete q[g][a];for(var l in q[g])return;
delete q[g]})},fire:function(a,b){return this.each(function(c){c==g&&!c.dispatchEvent&&(c=g.documentElement);var d=g.createEvent("HTMLEvents");d.initEvent(a,!0,!0);d.data=b||{};d.eventName=a;c.dispatchEvent(d)})}});"click load submit touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend orientationchange".split(" ").forEach(function(a){b.fn[a]=function(b){return b?this.on(a,b):this.fire(a)}});b(a).on("load",function(){if(!("onorientationchange"in g.body)){var f=a.innerWidth,
c=a.innerHeight;b(a).on("resize",function(){var d=a.innerWidth<f&&a.innerHeight>c&&a.innerWidth<a.innerHeight,g=a.innerWidth>f&&a.innerHeight<c&&a.innerWidth>a.innerHeight;if(d||g)a.orientation=d?0:90,b("body").fire("orientationchange"),f=a.innerWidth,c=a.innerHeight})}});var s;try{s=!!g.createEvent("TouchEvent").initTouchEvent}catch(o){s=!1}b.touch=s;b.ready=function(a){domReady(a)};d.id=1;b.extend({tween:function(a,b){var d={};["duration","after","easing"].forEach(function(b){a[b]&&(d[b]=a[b],delete a[b])});
var g,e=[],o;if(typeof a!=k){for(o in a)e.push(c(o)+":"+a[o]);e=e.join(";")}else e=a;g=e;return this.each(function(a){emile(a,g,d,b)})}});var I=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;b.extend({setStyle:function(a,b){a=a.replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()});return this.each(function(c){c.style[a]=b})},getStyle:function(a,b){if(void 0===b){var d=[];this.each(function(b){d.push(g.defaultView.getComputedStyle(b,"").getPropertyValue(c(a)))});return d}return this.each(function(d){b(g.defaultView.getComputedStyle(d,
"").getPropertyValue(c(a)))})},addClass:function(a){var b=a.split(" ");return this.each(function(a){b.forEach(function(b){!1===w(b).test(a.className)&&(a.className=l(a.className+" "+b))})})},hasClass:function(a,b){var c=a.split(" "),d;if(d=this.length){var g=!0;this.each(function(a){c.forEach(function(f){w(f).test(a.className)?b&&b(a):g=!1})});d=g}return d},removeClass:function(a){if(void 0===a)this.each(function(a){a.className=""});else{var b=a.split(" ");this.each(function(a){b.forEach(function(b){a.className=
l(a.className.replace(w(b),"$1"))})})}return this},toggleClass:function(a){var b=a.split(" ");return this.each(function(a){b.forEach(function(b){a.className=w(b).test(a.className)?l(a.className.replace(w(b),"$1")):l(a.className+" "+b)})})},css:function(a){for(var b in a)this.setStyle(b,a[b]);return this}});var A={},w=function(a){var b=A[a];b||(b=RegExp("(^|\\s+)"+a+"(?:\\s+|$)"),A[a]=b);return b};b.extend({xhr:function(a,b,c){function d(){4==e.readyState&&(delete k.xmlHttpRequest,(0===e.status||200==
e.status)&&e.handleResp(),/^[45]/.test(e.status)&&e.handleError())}/^(inner|outer|top|bottom|before|after)$/.test(a)||(c=b,b=a,a="inner");var g=c?c:{};"function"==typeof c&&(g={},g.callback=c);var k=this,e=new XMLHttpRequest,c=g.method||"get",o="undefined"!=typeof g.async?g.async:!0,h=g.data||null,j;e.queryString=h;e.open(c,b,o);e.setRequestHeader("X-Requested-With","XMLHttpRequest");"post"==c.toLowerCase()&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(j in g.headers)g.headers.hasOwnProperty(j)&&
e.setRequestHeader(j,g.headers[j]);e.handleResp=null!=g.callback?g.callback:function(){k.html(a,e.responseText)};e.handleError=g.error&&"function"==typeof g.error?g.error:function(){};o&&(e.onreadystatechange=d,this.xmlHttpRequest=e);e.send(h);o||d();return this}});var J=function(a,b,c){return(a+(b-a)*c).toFixed(3)},K=function(a,b,c){for(var d=2,g,e,k=[],o=[];g=3,e=arguments[d-1],d--;)if("r"==e.substr(0,1))for(e=e.match(/\d+/g);g--;)k.push(~~e[g]);else for(4==e.length&&(e="#"+e.substr(1,1)+e.substr(1,
1)+e.substr(2,1)+e.substr(2,1)+e.substr(3,1)+e.substr(3,1));g--;)k.push(parseInt(e.substr(1+2*g,2),16));for(;g--;)d=~~(k[g+3]+(k[g]-k[g+3])*c),o.push(0>d?0:255<d?255:d);return"rgb("+o.join(",")+")"},B=function(a){var b=parseFloat(a),a=a.replace(/^[\-\d\.]+/,"");return isNaN(b)?{v:a,f:K,u:""}:{v:b,f:J,u:a}},C=g.createElement("div"),x="backgroundColor borderBottomColor borderBottomWidth borderLeftColor borderLeftWidth borderRightColor borderRightWidth borderSpacing borderTopColor borderTopWidth bottom color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" ");
this.emile=function(a,b,c,d){var a="string"==typeof a?g.getElementById(a):a,c=c||{},e={},k=x.length,o;C.innerHTML='<div style="'+b+'"></div>';for(b=C.childNodes[0].style;k--;)if(o=b[x[k]])e[x[k]]=B(o);var k=a.currentStyle?a.currentStyle:getComputedStyle(a,null),h,j={},t=+new Date,l=c.duration||200,m=t+l,r,p=c.easing||function(a){return-Math.cos(a*Math.PI)/2+0.5};for(h in e)j[h]=B(k[h]);r=setInterval(function(){var b=+new Date,g=b>m?1:(b-t)/l;for(h in e)a.style[h]=e[h].f(j[h].v,e[h].v,p(g))+e[h].u;
b>m&&(clearInterval(r),c.after&&c.after(),d&&setTimeout(d,1))},10)};var D=this,u=g,E=function(a){for(y=1;a=z.shift();)a()},z=[],F,G,H=u.documentElement;s=H.doScroll;var y=/^loade|c/.test(u.readyState);u.addEventListener&&u.addEventListener("DOMContentLoaded",G=function(){u.removeEventListener("DOMContentLoaded",G,!1);E()},!1);s&&u.attachEvent("onreadystatechange",F=function(){/^c/.test(u.readyState)&&(u.detachEvent("onreadystatechange",F),E())});D.domReady=s?function(a){if(self!=top)y?a():z.push(a);
else a:{try{H.doScroll("left")}catch(b){setTimeout(function(){D.domReady(a)},50);break a}a()}}:function(a){y?a():z.push(a)};!0})();(function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")})})(this);
(function(c){function e(b){var a={};return b&&"[object Function]"==a.toString.call(b)}function d(b,a,c){a="("+c.replace(l,"\\$1")+")";return b.replace(RegExp(a,"gi"),"<strong>$1</strong>")}function h(b){div=c("<div/>");div.html(b);return div}function j(b,a){this.el=c(b);this.el.attr("autocomplete","off");this.suggestions=[];this.displaySuggestions=[];this.data=[];this.badQueries=[];this.checkBadQueries=!0;this.selectedIndex=-1;this.currentValue=this.el[0].value;this.intervalId=0;this.cachedResponse=
[];this.onChangeInterval=null;this.ignoreValueChange=!1;this.serviceUrl=a.serviceUrl;this.isLocal=!1;this.options={autoSubmit:!1,minChars:1,maxHeight:300,deferRequestBy:0,width:0,left:0,highlight:!0,params:{},fnFormatResult:d,delimiter:null,zIndex:9999,checkBadQueries:!0,render:h,enterAlwaysSelectsFirst:!1};this.initialize();this.setOptions(a)}var l=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");c.fn.autocomplete=function(b){return new j(this[0],b)};j.prototype={killerFn:null,
requestCounter:0,initialize:function(){var b,a,d;b=this;a=(new Date).getTime();d="Autocomplete_"+a;this.killerFn=function(a){for(var d=c(a.target),a=[],d=d[0]?d[0].parentNode:!1;d;)a.push(d),d=d.parentNode;0===c(a).filter(function(){return c(this).hasClass("autocomplete")}).length&&(b.killSuggestions(),b.disableKillerFn())};this.options.width||(this.options.width=this.el[0].offsetWidth);this.mainContainerId="AutocompleteContainer_"+a;a='<div id="'+this.mainContainerId+'" style="position:absolute;z-index:9999;"><div class="autocomplete-w1"><div class="autocomplete" id="'+
d+'" style="display:none;"></div></div></div>';c("body").html("bottom",a);this.container=c("#"+d);this.fixPosition();if(window.opera)this.el.on("keypress",function(a){b.onKeyPress(a)});else this.el.on("keydown",function(a){b.onKeyPress(a)});this.el.on("keyup",function(a){b.onKeyUp(a)});this.el.on("blur",function(){b.enableKillerFn()});this.el.on("focus",function(){b.fixPosition()});this.debouncedGetSuggestions=this.debounce(this.getSuggestions,200,!1)},setOptions:function(b){var a=this.options,d;
for(d in b)a[d]=b[d];a.lookup&&(this.isLocal=!0,a.lookup&&a.lookup.constructor==Array&&(a.lookup={suggestions:a.lookup,data:[]}));c("#"+this.mainContainerId).css({zIndex:a.zIndex});b=a.width;a.width||(b=this.el[0].offsetWidth);this.container.css({maxHeight:a.maxHeight+"px",width:b});this.serviceUrl!=a.serviceUrl&&(this.serviceUrl=a.serviceUrl,this.cachedResponse=[],this.badQueries=[])},clearCache:function(){this.cachedResponse=[];this.badQueries=[]},disable:function(){this.disabled=!0},enable:function(){this.disabled=
!1},fixPosition:function(){var b=this.el[0].getBoundingClientRect(),a=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;c("#"+this.mainContainerId).css({top:a+b.bottom+"px",left:b.left+this.options.left+"px"})},enableKillerFn:function(){c(document).on("click",this.killerFn);c(document).on("touchstart",this.killerFn)},disableKillerFn:function(){c(document).un("click",this.killerFn);c(document).un("touchstart",this.killerFn)},
killSuggestions:function(){var b=this;this.stopKillSuggestions();this.intervalId=window.setInterval(function(){b.hide();b.stopKillSuggestions()},300)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},onKeyPress:function(b){if(!this.disabled&&this.enabled){switch(b.keyCode){case 27:this.el[0].value=this.currentValue;this.hide();break;case 9:case 13:return console.log(this.options.enterAlwaysSelectsFirst+" index: "+this.selectedIndex),-1===this.selectedIndex?this.options.enterAlwaysSelectsFirst&&
this.select(0):this.select(this.selectedIndex),this.hide(),!0;case 38:this.moveUp();break;case 40:this.moveDown();break;default:return}b.stopImmediatePropagation();b.preventDefault()}},onKeyUp:function(b){if(!this.disabled){switch(b.keyCode){case 38:case 40:return}clearInterval(this.onChangeInterval);if(this.currentValue!==this.el[0].value)if(0<this.options.deferRequestBy){var a=this;this.onChangeInterval=setInterval(function(){a.onValueChange()},this.options.deferRequestBy)}else this.onValueChange()}},
onValueChange:function(){clearInterval(this.onChangeInterval);this.currentValue=this.el[0].value;var b=this.getQuery(this.currentValue);this.selectedIndex=-1;this.ignoreValueChange?this.ignoreValueChange=!1:""===b||b.length<this.options.minChars?this.hide():this.debouncedGetSuggestions(b)},debounce:function(b,a,c){var d;return function(){var e=this,h=arguments;d?clearTimeout(d):c&&b.apply(e,h);d=setTimeout(function(){c||b.apply(e,h);d=null},a||100)}},getQuery:function(b){var a;a=this.options.delimiter;
if(!a)return b.trim();b=b.split(a);return b[b.length-1].trim()},getSuggestionsLocal:function(b){var a,c,d,e,h;c=this.options.lookup;d=c.suggestions.length;a={suggestions:[],data:[]};b=b.toLowerCase();for(h=0;h<d;h++)e=c.suggestions[h],0===e.toLowerCase().indexOf(b)&&(a.suggestions.push(e),a.data.push(c.data[h]));a.displaySuggestions=a.suggestions;return a},getSuggestions:function(b){var a,d;if((a=this.isLocal?this.getSuggestionsLocal(b):this.cachedResponse[b])&&a.suggestions&&a.suggestions.constructor==
Array)this.suggestions=a.suggestions,this.displaySuggestions=a.displaySuggestions,this.data=a.data,this.suggest();else if(!this.isBadQuery(b)){d=this;d.options.params.query=b;var b=[],e;for(e in d.options.params)d.options.params.hasOwnProperty(e)&&b.push(e+"="+encodeURIComponent(d.options.params[e]));e="?"+b.join("&");e=d.serviceUrl+e;d.requestCounter+=1;var h=d.requestCounter;c(document).xhr(e,{method:"get",async:!0,callback:function(){d.requestCounter==h&&d.processResponse(this.responseText)}})}},
isBadQuery:function(b){if(!this.checkBadQueries)return!1;for(var a=this.badQueries.length;a--;)if(0===b.indexOf(this.badQueries[a]))return!0;return!1},hide:function(){this.enabled=!1;this.selectedIndex=-1;this.container.css({display:"none"})},suggest:function(){if(0===this.suggestions.length)this.hide();else{var b,a,c,d,h,j,l;b=this;a=this.suggestions.length;this.getQuery(this.currentValue);j=function(a){return function(){b.activate(a)}};l=function(a){return function(){b.select(a)}};this.container.css({display:"none"});
this.container.find("div").remove();for(d=0;d<a;d++)h=this.displaySuggestions[d],c=this.options.render(h),b.selectedIndex==d&&c.addClass("selected"),c.attr("title",h.label),c.on("mouseover",j(d)),c.click(l(d)),this.container[0].appendChild(c[0]);this.enabled=!0;this.container.css({display:"block"});this.container[0].scrollTop=0;a=this.options.onSuggest;e(a)&&a(this.el)}},processResponse:function(b){var a,c=this.options.processResponse;try{a=eval("("+b+")"),e(c)&&(a=c(a))}catch(d){return}a.data&&a.data.constructor==
Array||(a.data=[]);this.cachedResponse[a.query]=a;"displaySuggestions"in a||(a.displaySuggestions=a.suggestions);0===a.suggestions.length&&this.badQueries.push(a.query);this.suggestions=a.suggestions;this.displaySuggestions=a.displaySuggestions;this.data=a.data;this.suggest()},activate:function(b){var a,d;a=c(this.container[0].childNodes);-1!==this.selectedIndex&&a.length>this.selectedIndex&&c(a[this.selectedIndex]).attr("class","");this.selectedIndex=b;-1!==this.selectedIndex&&a.length>this.selectedIndex&&
(d=a[this.selectedIndex],c(d).attr("class","selected"));return d},deactivate:function(b,a){b.className="";this.selectedIndex===a&&(this.selectedIndex=-1)},select:function(b){var a;a=this.suggestions[b];selectedData=this.data[b];a&&(this.hide(),this.onSelect(b))},moveUp:function(){-1!==this.selectedIndex&&(0===this.selectedIndex?(c(this.container[0].childNodes)[0].className="",this.selectedIndex=-1,this.el[0].value=this.currentValue):this.adjustScroll(this.selectedIndex-1))},moveDown:function(){this.selectedIndex!==
this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(b){var a,c,b=this.activate(b).offsetTop;a=this.container[0].scrollTop;c=a+this.options.maxHeight-25;b<a?this.container[0].scrollTop=b:b>c&&(this.container.scrollTop=b-this.options.maxHeight+25)},onSelect:function(b){var a,c,d;a=this.options.onSelect;c=this.suggestions[b];b=this.data[b];var h;(h=this.options.delimiter)?(d=this.currentValue,h=d.split(h),d=1===h.length?c:d.substr(0,d.length-h[h.length-1].length)+
c):d=c;if(d=d.label)this.el[0].value=d;e(a)&&a(c,b)}}})(xui);window.notificationBar=function(){};notificationBar.prototype={show:function(c){c=c||{};c=c.content||"<div>Hello World</div>";$(".notification-bar-content").html(c);$(".notification-bar").addClass("notification-bar-visible")},hide:function(){$(".notification-bar").removeClass("notification-bar-visible")}};loginScreenInitialized=!1;
function initializeLoginScreen(){function c(c){c?(x$(".submit").attr("disabled","disabled"),x$(".spinner").addClass("visible")):(x$(".submit").each(function(){this.removeAttribute("disabled")}),x$(".spinner").removeClass("visible"))}if(!loginScreenInitialized){loginScreenInitialized=!0;var e=function(){x$("#login-window").removeClass("visible");return!1};x$("#login-window-close").fastClick(e);x$("#login-window-background").fastClick(e);x$("#connect-tab-link").fastClick(function(){x$("#login-window-foreground").attr("class",
"state-connect");return!1});x$("#login-tab-link").fastClick(function(){x$("#login-window-foreground").attr("class","state-login");return!1});x$("#register-tab-link").fastClick(function(){x$("#login-window-foreground").attr("class","state-register");return!1});var e=parseUrlParams(window.location.href),d=e.u||window.location.href;"u"in e&&x$("#login-window form[id$=-form]").each(function(c){x$(c).bottom('<input type="hidden" name="url" value="'+d+'" />')});x$("#create-account-form").submit(function(){x$(".create-error").html("");
if(x$("#create-password")[0].value!=x$("#create-password2")[0].value)return x$(".create-error").html("The two passwords must be identical"),!1;c(!0);_gaq.push(["_trackEvent","account","select-provider","password"]);x$("#create-account-form").xhr("/api/create-account-password",{method:"post",callback:function(){location.href=d},error:function(){c(!1);var d="Something is wrong. Please try again later.";409==this.status?(_gaq.push(["_trackEvent","account","password-create-already-exists"]),d="We've already got an account with that username or email address."):
400==this.status&&(d=this.statusText);x$(".create-error").html(d)},data:"email="+encodeURIComponent(x$("#create-email")[0].value)+"&password="+encodeURIComponent(x$("#create-password")[0].value)+"&username="+encodeURIComponent(x$("#create-username")[0].value)});return!1});x$("#forgot-password-link").fastClick(function(){if(0==x$("#login-email")[0].value.length)return x$(".login-error").html("Please enter your email address first"),!1;x$(".login-error").html("");c(!0);x$(".login-error").xhr("/api/create-password-reset-token",
{method:"post",callback:function(){c(!1);_gaq.push(["_trackEvent","account","password-forgot"]);x$(".login-error").html("An email has been sent with instructions on how to reset your password.")},error:function(){c(!1);var d="Something is wrong. Please try again later.";404==this.status?d="No account found with this email address.":400==this.status&&(d=jqXHR.statusText);x$(".login-error").html(d)},data:"email="+encodeURIComponent(x$("#login-email")[0].value)});return!1});x$("#login-form").submit(function(){x$("#login-error").html("");
c(!0);x$("#login-form").xhr("/api/password-auth",{method:"post",callback:function(){location.href=d},error:function(){_gaq.push(["_trackEvent","account","password-login-failed"]);c(!1);x$(".login-error").html("Sorry, we could not find that combination of email and password.")},data:"email="+encodeURIComponent(x$("#login-email")[0].value)+"&password="+encodeURIComponent(x$("#login-password")[0].value)});return!1})}}
(function(c){c.ready(function(){"placeholder"in document.createElement("input")||c("input[placeholder], textarea[placeholder]").placeholder()});c.fn.placeholder=function(e,d){e&&this.attr("placeholder",e);d||(d="blur");return this.each(function(){function e(){j.attr("value")[0]===l&&j.hasClass(d)&&(j.attr("value",""),j.removeClass(d))}var j=c(this),l=j.attr("placeholder")[0],b=c(this.form),a=c(window);l&&(j.on("blur",function(){""===j.attr("value")[0]&&(j.attr("value",l),j.addClass(d))}),j.on("focus",
e),j.fire("blur"),j.attr("value")[0]||j.attr("value",l),b.submit(e),a.on("unload",e))})}})(xui);
(function(){function c(c,e,j,l){if(c.addEventListener)return c.addEventListener(e,j,l),{destroy:function(){c.removeEventListener(e,j,l)}};var b=function(){j.handleEvent(window.event,j)};c.attachEvent("on"+e,b);return{destroy:function(){c.detachEvent("on"+e,b)}}}var e="ontouchstart"in window;this.FastButton=function(d,h,j){this.events=[];this.touchEvents=[];this.element=d;this.handler=h;this.useCapture=j||!1;e&&this.events.push(c(d,"touchstart",this,this.useCapture));this.events.push(c(d,"click",this,
this.useCapture))};this.FastButton.prototype.destroy=function(){for(i=this.events.length-1;0<=i;i-=1)this.events[i].destroy();this.events=this.touchEvents=this.element=this.handler=this.fastButton=null};this.FastButton.prototype.handleEvent=function(c){switch(c.type){case "touchstart":this.onTouchStart(c);break;case "touchmove":this.onTouchMove(c);break;case "touchend":this.onClick(c);break;case "click":this.onClick(c)}};this.FastButton.prototype.onTouchStart=function(d){d.stopPropagation?d.stopPropagation():
d.cancelBubble=!0;this.touchEvents.push(c(this.element,"touchend",this,this.useCapture));this.touchEvents.push(c(document.body,"touchmove",this,this.useCapture));this.startX=d.touches[0].clientX;this.startY=d.touches[0].clientY};this.FastButton.prototype.onTouchMove=function(c){(10<Math.abs(c.touches[0].clientX-this.startX)||10<Math.abs(c.touches[0].clientY-this.startY))&&this.reset()};this.FastButton.prototype.onClick=function(c){c.stopPropagation?c.stopPropagation():c.cancelBubble=!0;this.reset();
var e=this.handler.call(this.element,c);"touchend"==c.type&&clickbuster.preventGhostClick(this.startX,this.startY);return e};this.FastButton.prototype.reset=function(){for(i=this.touchEvents.length-1;0<=i;i-=1)this.touchEvents[i].destroy();this.touchEvents=[]};this.clickbuster=function(){};this.clickbuster.preventGhostClick=function(c,e){clickbuster.coordinates.push(c,e);window.setTimeout(clickbuster.pop,2500)};this.clickbuster.pop=function(){clickbuster.coordinates.splice(0,2)};this.clickbuster.onClick=
function(c){for(var e=0;e<clickbuster.coordinates.length;e+=2){var j=clickbuster.coordinates[e+1];25>Math.abs(c.clientX-clickbuster.coordinates[e])&&25>Math.abs(c.clientY-j)&&(c.stopPropagation?c.stopPropagation():c.cancelBubble=!0,c.preventDefault?c.preventDefault():c.returnValue=!1)}};e&&(document.addEventListener("click",clickbuster.onClick,!0),clickbuster.coordinates=[])})(this);
(function(c){c.fn.fastClick=function(c,d){return this.each(function(h,j,l){h.fastButton=new FastButton(l[j],c,d)})};c.fn.unFastClick=function(){return this.each(function(c){c.fastButton.destroy();c.fastButton=null})}})(xui);x$.ready(function(){setupAffiliateAds()});
function setupAffiliateAds(){x$("div.load-hyu").each(function(){var c=x$(this).attr("data-url");x$(this).attr("data-at-link-name");var e=this;x$(this).xhr(c,function(){e.innerHTML=this.responseText;x$(e).find("a").each(function(c){$.each(e.attributes,function(){null!=this.name.match(/data-at-/)&&x$(c).attr(this.name,this.value)})})})})}
function logProductClick(c,e,d){_gaq.push(["_set","hitCallback",function(){_gaq.push(["_set","hitCallback",function(){}]);window.location=d}]);_gaq.push(["_trackEvent","affiliate-click",c+"-product",e]);setTimeout(function(){window.location=d},250);return!1}setupConsole();
function setupConsole(){if(!("console"in window)){var c="log debug info warn error assert dir dirxml group groupEnd time timeEnd count trace profile profileEnd".split(" ");window.console={};for(var e=0;e<c.length;++e)window.console[c[e]]=function(){}}}function trackClicks(c,e){x$(c).find("a").click(function(){_gaq.push(["_trackEvent",e,"click",x$(this).attr("href"),0,!0])})}
function parseUrlParams(c){for(var e={},d=/\+/g,h=/([^&=]+)=?([^&]*)/g,j=c.split("?")[1];c=h.exec(j);)e[decodeURIComponent(c[1].replace(d," "))]=decodeURIComponent(c[2].replace(d," "));return e}function autocompleteRender(c){return x$(c.rendered)}
function async_load(c,e){x$.ready(function(){var d=document.createElement("script");d.type="text/javascript";d.async=!0;d.src=c;d.onload=d.onreadystatechange=function(){var j=this.readyState;if(!j||!("complete"!=j&&"loaded"!=j))try{e&&e(d)}catch(h){console.warn("An unexpected exception occurred on callback for script "+c+": "+h)}};var h=document.getElementsByTagName("script")[0];h.parentNode.insertBefore(d,h)})}
function loadFacebook(){window.fbAsyncInit=function(){FB.init({appId:"204024553000594",status:!0,cookie:!0,xfbml:!0});FB.Event.subscribe("edge.create",function(c){_gaq.push(["_trackSocial","Facebook","like",c]);_gaq.push(["_trackEvent","social","share (facebook like)",c])});FB.Event.subscribe("edge.remove",function(c){_gaq.push(["_trackSocial","Facebook","unlike",c])});FB.Event.subscribe("message.send",function(c){_gaq.push(["_trackSocial","Facebook","send",c]);_gaq.push(["_trackEvent","social","share (facebook send)",
c])})};async_load(document.location.protocol+"//connect.facebook.net/en_US/all.js")}function loadGooglePlusOne(){(0<x$("g\\:plusone").length||0<x$(".plusone").length)&&async_load("https://apis.google.com/js/plusone.js")}function gPlusOneClick(c){c=c||{};"on"===c.state&&_gaq.push(["_trackEvent","social","share (google +1)",c.href])}x$.ready(function(){loadFacebook();loadGooglePlusOne()});
x$.ready(function(){x$("a.fastclick").each(function(){var c=x$(this);c.fastClick(function(e){var d=c.attr("href")[0];window.location.href=d;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;e.preventDefault?e.preventDefault():e.returnValue=!1})})});x$.ready(function(){trackClicks(".nav","site-nav")});x$(window).load(function(){x$("img").each(function(c){var e=x$(c).attr("altsrc");0<e.length&&(c.src=e[0])})});
function isMobile(){var c=navigator.userAgent||navigator.vendor||window.opera;return/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4))?!0:!1}
x$.ready(function(){function c(a){m.addClass("menu-visible");x$(".menu-launcher-wrapper").addClass("menu-open");a.preventDefault?a.preventDefault():a.returnValue=!1}function e(a,b){m.removeClass("menu-visible");x$(".menu-launcher-wrapper").removeClass("menu-open");p&&p.killerFn(a);b&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}function d(a){m.hasClass("menu-visible")?e(!0):c(a)}function h(a){var b=x$(this).attr("data-domain");l(b);0<m.find(".actions")[0].offsetWidth?a.preventDefault?a.preventDefault():
a.returnValue=!1:window.location="/"+b}function j(){var a=x$(this).attr("data-domain");l(a)}function l(a){a&&(m.find(".actions li").removeClass("visible"),m.find('.actions li[data-domain="'+a+'"]').addClass("visible"),m.find(".domains li").removeClass("active"),m.find('.domains li[data-domain="'+a+'"]').addClass("active"),m.find("a#questions").attr("href","/questions/in+"+a),m.find("input#product-lookup").attr("placeholder","lookup "+a),m.find(".product-lookup form").attr("action","/api/"+a+"/product-search"),
p&&(p.clearCache(),p.serviceUrl="/cacheable/api/"+a+"/product-autosuggest/v2"))}function b(a){return function(b){var c=b.relatedTarget,d;if(!(d=this===c))if(this==c)d=!1;else{for(;c&&c!==this;)c=c.parentNode;d=this===c}d||a.call(this,b)}}function a(a){m.find("#query-product-id")[0].value=a.id;m.find(".product-lookup form")[0].submit()}function k(a){t(a,!0)}function g(a){t(a,!1)}function t(a){if(m.hasClass("menu-visible")){for(a=a.target||a.srcElement;a;){if("navbar-menu"===a.id||x$(a).hasClass("menu-launcher-wrapper")||
x$(a).hasClass("autocomplete"))return;a=a.parentNode}e(!0)}}x$("#login-or-register").fastClick(function(){0==x$("#login-window").length?x$("#login-window").xhr("/lib/login",{callback:function(){x$("body").html("bottom",this.responseText);initializeLoginScreen();x$("#login-window").addClass("visible")}}):x$("#login-window").addClass("visible");return!1});var r=x$(".nav #product-lookup");0<r.length&&r.autocomplete({serviceUrl:"/cacheable/api/product-autosuggest/v2",render:autocompleteRender,processResponse:function(a){return a},
onSelect:function(a){x$("#query-product-id")[0].value=a.id;x$(".nav .product-lookup form")[0].submit()}});var m=x$("#navbar-menu");if(m[0]){x$("#mobile-header #sortable-btn").fastClick(function(a){d(a)});var r={serviceUrl:"/cacheable/api/product-autosuggest/v2",render:autocompleteRender,onSelect:a},p=m.find("#product-lookup").autocomplete(r);if(r=!!("ontouchstart"in window))x$(".menu-launcher").fastClick(d),x$(".domain-item").fastClick(h);else{var v="mouseenter",q=document.createElement("div"),v=
"on"+v,s=v in q;s||(q.setAttribute(v,"return;"),s="function"===typeof q[v]);if(s)x$(".menu-launcher").on("mouseenter",c);else x$(".menu-launcher").on("mouseover",b(c));x$(".menu-launcher").on("click",d);x$(".domain-item").on("mouseover",j);x$(".index-link").on("click",function(){window.location="/"})}x$(window.document).on("mousemove",k);x$(window).on("mouseout",function(a){null==a.relatedTarget&&e(!0)});r&&window.addEventListener("touchstart",g,!1);l(x$(".domains li.active").attr("data-domain"))}});