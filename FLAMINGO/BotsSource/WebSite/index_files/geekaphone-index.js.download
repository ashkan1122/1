$(function(){function b(a,b){(1==a||2==a)&&$("#product"+a+"-error").text(b)}function c(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))}var d=[];$("input.product1").val(c("product1")||"");$("input.product2").val(c("product2")||"");"false"===c("found1")&&b(1,"Cannot find this phone");"false"===c("found2")&&b(2,"Cannot find this phone");var f="/cacheable/api/"+geekaphone.domain+"/product-autosuggest/v2";
$("#compare form").submit(function(){var a=!0;""==$("input.product1").val().trim()?(b(1,"Enter a phone"),a=!1):b(1,"");""==$("input.product2").val().trim()?(b(2,"Enter a phone"),a=!1):b(2,"");return a});$("#compare").find(".product-selectable").click(function(){var a=$(this),g=a.attr("data-id"),c=a.attr("data-label"),h=$("input.product1"),e=$("input.product2"),f=$("#compare form");if(_.contains(d,g))d=_.filter(d,function(a){return a!=g}),a.removeClass("selected"),h.val()==c?(h.val(e.val()),e.val(""),
b(1,""),b(2,"")):e.val()==c&&(e.val(""),b(2,""));else{for(;2<=d.length;){var i=d.pop();$compare.find('[data-id="'+i+'"]').removeClass("selected")}a.addClass("selected");d.push(g);1==d.length?(h.val(c),b(1,"")):2==d.length&&(e.val(c),b(2,""))}2==d.length&&f.submit()});x$("input.product1").autocomplete({serviceUrl:f,render:autocompleteRender,onSelect:function(){b(1,"")}});x$("input.product2").autocomplete({serviceUrl:f,render:autocompleteRender,onSelect:function(){b(1,"")}});$("#news .multi-events-more").each(function(){var a=
$(this);a.find(".show-more").click(function(b){a.addClass("expanded");b.stopPropagation();return!1})})});